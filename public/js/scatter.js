$(function(){function t(t,e){l.selectAll(".dot").remove(),l.selectAll(".dot").data(e).enter().append("circle").attr("class","dot").attr("r",3.5).attr("cx",function(t){return i(t.avg_star)}).attr("cy",function(t){return c(t.concussions2015)}).style("fill",function(e){if(e.school_id==t){var o=d3.select(this);return o.moveToFront(),"blue"}return"yellow"}).on("mouseover",d.show).on("mouseout",d.hide)}var e,o,n=$(window).width();n>=650?(e=600,o=500):n<=350?(e=290,o=290):(e=n-50,o=e-50);var s={top:30,right:20,bottom:40,left:40},a=e-s.left-s.right,r=o-s.top-s.bottom,i=d3.scaleLinear().range([0,a]),c=d3.scaleLinear().range([r,0]),l=d3.select("#scatterplot").append("svg").attr("width",a+s.left+s.right).attr("height",r+s.top+s.bottom).append("g").attr("transform","translate("+s.left+","+s.top+")"),d=d3.tip().attr("class","d3-tip").offset(function(){return d3.mouse(this)[0]<100?[-10,100]:d3.mouse(this)[0]<e-50&&d3.mouse(this)[0]>e-150?[-10,-100]:d3.mouse(this)[1]<50?[80,0]:[-10,0]}).html(function(t){return"<em>"+t.name+"</em><br><strong>Average Helmet Rating: </strong>"+t.avg_star+"</br><strong>Concussions in 2015: </strong>"+t.concussions2015});l.call(d),d3.csv("js/concussionsbyschool.csv",function(t){return t.avg_star=+t.avg_star,t.concussions2015=+t.concussions2015,t.name=t.name,t.school_id=t.school_id,t},function(e,o){if(e)throw e;i.domain(d3.extent(o,function(t){return t.avg_star})).nice(),c.domain([0,d3.max(o,function(t){return t.concussions2015+2})]),l.append("g").attr("class","axis").attr("transform","translate(0,"+r+")").call(d3.axisBottom(i)).append("text").attr("class","axis-title").attr("x",a).attr("y",25).attr("dy",".71em").style("text-anchor","end").text("Average Helmet Rating"),l.append("g").attr("class","axis").call(d3.axisLeft(c)).append("text").attr("class","axis-title").attr("x",-40).attr("y",-20).attr("dy",".71em").style("text-anchor","start").text("Concussions"),t(0,o),$("#school").selectize({options:o,maxItems:1,labelField:"name",searchField:"name",sortField:"name",valueField:"school_id",onChange:function(e){t(e,o),console.log(e)},allowEmptyOption:!0,placeholder:"Enter a school name to search"})}),d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})}});
//# sourceMappingURL=scatter.js.map
