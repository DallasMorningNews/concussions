$(document).ready(function(){var e=new Date,t=e.getFullYear();$(".copyright").text(t)}),TDMN={},function(e,t,n,o,l){"use strict";var s=new t.Model,r=t.Collection.extend({highlight:function(e){this.trigger("highlight",this.get(e))}});l.schoolsCollection=new r,l.helmetsCollection=new t.Collection;var c=n.ItemView.extend({constructor:function(){this.debouncedHandleQuery=o.debounce(this.handleQuery,200),n.ItemView.apply(this,arguments)},events:{"input input":"debouncedHandleQuery"},template:"#tpl-search-box",handleQuery:function(e){this.model.set("q",e.currentTarget.value)}}),i=new c({el:"#search-box",model:s});i.render();var h=n.CollectionView.extend({el:"#search-results",collectionEvents:{reset:"render"},childView:n.ItemView.extend({template:"#tpl-search-results"}),_searchQuery:"",search:function(e){this._searchQuery=e.toLowerCase(),this.render()},filter:function(e,t,n){return""!==this._searchQuery&&e.get("name").toLowerCase().indexOf(this._searchQuery)!==-1}}),a=new h({collection:l.schoolsCollection});s.on("change:q",function(e,t){a.search(t)}),l.schoolsCollection.on("highlight",function(e){s.set("q",e.get("name"))}),e.getJSON("js/data.json",function(e){l.helmetsCollection.reset(e.helmets),e.schools.map(function(e){return e.helmets=o.map(e.helmets,function(e){return e.helmet=l.helmetsCollection.get(e.helmet).toJSON(),e}),e}),l.schoolsCollection.reset(e.schools)})}(jQuery,Backbone,Marionette,_,TDMN);
//# sourceMappingURL=scripts-bundle.js.map
